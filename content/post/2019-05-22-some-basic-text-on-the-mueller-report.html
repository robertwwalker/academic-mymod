---
title: Some Basic Text on the Mueller Report
author: RWW
date: '2019-05-22'
slug: some-basic-text-on-the-mueller-report
categories:
  - tidyverse
  - tidytext
tags:
  - tidytext
  - R
header:
  caption: ''
  image: ''
  preview: yes
---

<script src="/rmarkdown-libs/htmlwidgets/htmlwidgets.js"></script>
<link href="/rmarkdown-libs/wordcloud2/wordcloud.css" rel="stylesheet" />
<script src="/rmarkdown-libs/wordcloud2/wordcloud2-all.js"></script>
<script src="/rmarkdown-libs/wordcloud2/hover.js"></script>
<script src="/rmarkdown-libs/wordcloud2-binding/wordcloud2.js"></script>


<div id="so-this-robert-mueller-guy-wrote-a-report" class="section level1">
<h1>So this Robert Mueller guy wrote a report</h1>
<p>I may as well analyse it a bit.</p>
<p>First, let me see if I can get a hold of the data. I grabbed the report directly from the Department of Justice website. You can follow this <a href="https://www.justice.gov/storage/report.pdf">link</a>.</p>
<pre class="r"><code>library(tidyverse)
library(pdftools)
# Download report from link above
mueller_report_txt &lt;- pdf_text(&quot;../data/report.pdf&quot;)
# Create a tibble of the text with line numbers and pages
mueller_report &lt;- tibble(
  page = 1:length(mueller_report_txt),
  text = mueller_report_txt) %&gt;% 
  separate_rows(text, sep = &quot;\n&quot;) %&gt;% 
  group_by(page) %&gt;% 
  mutate(line = row_number()) %&gt;% 
  ungroup() %&gt;% 
  select(page, line, text)
write_csv(mueller_report, &quot;data/mueller_report.csv&quot;)</code></pre>
<p>Now I can use a .csv of the data; reading the .pdf and hacking it up takes time.</p>
<pre class="r"><code>library(tidyverse)
library(pdftools)
mueller_report &lt;- read_csv(&quot;../../data/mueller_report.csv&quot;)
head(mueller_report)</code></pre>
<pre><code>## # A tibble: 6 x 3
##    page  line text                                                         
##   &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;                                                        
## 1     1     1 U.S. Department of Justice                                   
## 2     1     2 &quot;AttarAe:,c \\\\&#39;erlc Predtiet // Mtt; CeA1:ttiA Ma1:ertal Pâ€¦
## 3     1     3 Report On The Investigation Into                             
## 4     1     4 Russian Interference In The                                  
## 5     1     5 2016 Presidential Election                                   
## 6     1     6 Volume I of II</code></pre>
<p>The text is generally pretty good though there is some garbage. The second line contains redactions and those are the underlying cause. In fact, every page contains this same line though they convert to text in a non-uniform fashion.</p>
<pre class="r"><code>mueller_report %&gt;% filter(line!=2) -&gt; mueller_ml2</code></pre>
<p>I want to make use of <a href="https://github.com/statsmaths/cleanNLP">cleanNLP</a> to turn this into something that I can analyze. The first step is to get rid of the tidyness, of sorts.</p>
<pre class="r"><code>library(tidyverse)
library(RCurl)
library(tokenizers)
library(cleanNLP)
MRep &lt;- paste(as.character(mueller_ml2$text), &quot; &quot;)
cnlp_init_spacy()
starttime &lt;- Sys.time()
spacy_annotate &lt;- MRep %&gt;% as.character() %&gt;% cnlp_annotate(as_strings = TRUE, backend = &quot;spaCy&quot;) 
endtime &lt;- Sys.time()</code></pre>
<p>I wanted to find the bigrams while removing stop words. Apparently, the easiest way to do this is <code>quanteda</code>. I got this from <a href="https://stackoverflow.com/questions/34282370/form-bigrams-without-stopwords-in-r">stack overflow</a></p>
<pre class="r"><code>library(quanteda)</code></pre>
<pre><code>## Package version: 1.4.3</code></pre>
<pre><code>## Parallel computing: 2 of 16 threads used.</code></pre>
<pre><code>## See https://quanteda.io for tutorials and examples.</code></pre>
<pre><code>## 
## Attaching package: &#39;quanteda&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:utils&#39;:
## 
##     View</code></pre>
<pre class="r"><code>library(wordcloud2)
myDfm &lt;- tokens(MRep) %&gt;%
    tokens_remove(&quot;\\p{P}&quot;, valuetype = &quot;regex&quot;, padding = TRUE) %&gt;%
    tokens_remove(stopwords(&quot;english&quot;), padding  = TRUE) %&gt;%
    tokens_ngrams(n = 2) %&gt;%
    dfm()
wc2 &lt;- topfeatures(myDfm, n=150, scheme=&quot;count&quot;)
wc2.df &lt;- data.frame(word = names(wc2), freq=as.numeric(wc2))
wc2.df$word &lt;- as.character(wc2.df$word)
wc2.df &lt;- wc2.df %&gt;% filter(freq &lt; 300)
wordcloud2(wc2.df, size=0.4)</code></pre>
<div id="htmlwidget-1" style="width:672px;height:480px;" class="wordcloud2 html-widget"></div>
<script type="application/json" data-for="htmlwidget-1">{"x":{"word":["trump_campaign","16_email","special_counsel","white_house","ongoing_matter","states_v","trump_jr","russian_government","new_york","attorney_general","june_9","trump_tower","personal_counsel","trump_organization","et_al","candidate_trump","moscow_project","17_notes","york_times","foreign_policy","russia_investigation","donald_trump","text_message","tower_moscow","cohen_9","paul_manafort","presidential_election","mcgahn_12","michael_cohen","president_trump","9_meeting","grand_jury","washington_post","campaign_officials","fbi_director","national_security","social_media","mcgahn_3","false_statements","president_said","19_302","flynn_11","president_told","transition_team","election_interference","hillary_clinton","sessions_1","section_1512","russian_election","16_text","oval_office","clinton_campaign","see_also","investigative_technique","simes_3","president_asked","june_8","text_messages","mcfarland_12","17_memorandum","17_text","donald_j","russian_ambassador","acting_attorney","trump_moscow","hicks_3","senate_select","pleaded_guilty","select_intelligence","james_b","next_day","2016_presidential","intelligence_committee","cohen_11","jared_kushner","2016_meeting","corney_11","hicks_12","michael_flynn","volume_ii","president_also","8_302","june_2016","former_director","policy_advisor","gru_officers","cohen_recalled","page_3","hunt_5","george_papadopoulos","incoming_administration","115th_cong","counsel_removed","security_advisor","15th_cong","see_volume","porter_4","judiciary_committee","president_called","kushner_4","july_2016","senate_judiciary","christie_2","netyksho_indictment","15_email","call_records","papadopoulos_8","lewandowski_4","manafort_9","october_7","government_officials","priebus_1","see_united","official_proceeding","article_ii","clinton_emails","bannon_2","obstructive_act","plea_agreement","obstruction_statutes","russian_officials","press_conference","17_email","anyone_else","russian_interference","carter_page","flynn_statement","vice_president","16_facebook","president_tweeted","fox_news","flynn_1","vladimir_putin","email_accounts","house_counsel","deputy_attorney","nader_1","quotation_marks","jeff_sessions","december_2016","april_2016","june_14","cohen_said","president_knew","emin_agalarov","written_responses","papadopoulos_statement"],"freq":[229,220,215,204,197,175,150,145,141,134,131,128,117,100,100,90,83,82,81,81,79,76,74,72,72,70,69,69,68,68,67,64,63,63,61,60,59,59,58,58,56,55,55,54,54,53,53,53,52,52,51,50,50,50,49,47,47,47,46,46,45,44,42,42,42,41,41,40,39,39,38,36,36,36,35,35,34,34,33,33,33,32,32,32,32,32,32,31,31,30,30,30,30,29,29,29,29,28,28,28,27,27,27,27,27,27,27,27,27,26,26,26,26,26,26,25,25,25,25,25,24,24,24,24,23,23,23,23,23,23,22,22,22,22,22,22,22,22,21,21,21,21,21,21,21,21,21],"fontFamily":"Segoe UI","fontWeight":"bold","color":"random-dark","minSize":0,"weightFactor":0.314410480349345,"backgroundColor":"white","gridSize":0,"minRotation":-0.785398163397448,"maxRotation":0.785398163397448,"shuffle":true,"rotateRatio":0.4,"shape":"circle","ellipticity":0.65,"figBase64":null,"hover":null},"evals":[],"jsHooks":{"render":[{"code":"function(el,x){\n                        console.log(123);\n                        if(!iii){\n                          window.location.reload();\n                          iii = False;\n\n                        }\n  }","data":null}]}}</script>
<div id="pdfpages-a-little-plot" class="section level2">
<h2>pdfpages: A little plot</h2>
<p>I found some instructions on constructing the entire document on a grid and pulled the report apart to visualise it in that way.</p>
<div class="figure">
<embed src="%22../../all_pages.png%22" />
<p class="caption">A Graphic</p>
</div>
</div>
</div>
